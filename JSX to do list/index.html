<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To do list</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
       
        #container{
            border: 5px solid;
            padding: 20px;
            width: 40%;
            height: 560px;
            margin: auto;
            margin-top: 10px;
            background-color: lightcoral;
        }
        #head{
            padding: 10px;
            text-align: center;
            background-color: chartreuse;
           
        }
        #body{
            padding: 10px;
            background-color: aqua;
            height: 350px;
            list-style-type: none;
        }
        button{
            margin: 5px;
        }
    </style>
</head>

<body>
    <div id="container" class="card">
       <h1 align="center">TO DO LIST</h1>
        <div id="head" class="mb-3 card"></div>
        <ul id="body" class="card "></ul>
    </div>
    <script type="text/babel">
        var currindex;
        var arr = []
        var stat = false;
        function updateHead() {
            var inp = <div>
                <input class='rounded rounded-3' type="text" id='text' />
                {!stat && <button  class='btn btn-primary' onClick={() => { add() }}>Add to List</button>}
                {stat && <button class='btn btn-primary' onClick={() => { update() }}>Update</button>} <br /><br />
                <input class='ms-2' type="radio" name='radio' value='all' onChange={() => { checkFilter(event) }} />All
                <input class='ms-3' type="radio" name='radio' value='completed' onChange={() => { checkFilter(event) }} />Completed
                <input class='ms-3' type="radio" name='radio' value='not completed' onChange={() => { checkFilter(event) }} />Not completed
            </div>
            ReactDOM.render(inp, document.getElementById('head'))
            var text = document.getElementById('text')
        }

        function add() {
            var obj = {
                'task': text.value,
                'status': false
            }
            arr.push(obj);
            text.value=''
            runfilter()
            genUI(filter)
        }

        function genUI(arr1) {

            var list = arr1.map((a, index) => {
                return (
                    <>
                        <li class='mb-1' >
                            <i class="bi bi-caret-right-fill "></i>
                            <span style={{ textDecoration: (a.status) ? ('line-through') : ('none'), color: (a.status) ? ('red') : ('black') }}>{a.task}</span>
                            {!a.status && <button class="btn btn-warning" onClick={() => { done(index) }} style={{marginLeft:'10px'}}>Done</button>}
                            {a.status && <button class="btn btn-warning" onClick={() => { undo(index) }}>Undo</button>}
                            {!a.status && <button class="btn btn-danger" onClick={() => { edit(index) }}>Edit</button>}
                            {a.status && <button class="btn btn-danger" onClick={() => { del(index) }}>Delete</button>}
                        </li>
                    </>
                )

            })
            ReactDOM.render(list, document.getElementById('body'))
        }

        function done(ind) {
            arr[ind].status = true
            runfilter()
            genUI(filter)
        }
        function undo(ind) {
            arr[ind].status = false
            runfilter()

            genUI(filter)

        }
        function edit(ind) {
            stat = true
            currindex = ind;

            text.value = arr[ind].task
            genUI(arr)
            updateHead()
        }
        function del(ind) {
            arr.splice(ind, 1)
            genUI(arr)
        }

        function update() {
            stat = false
            updateHead()
            var ob1 = {};
            ob1.task = text.value;

            ob1.status = false
            arr[currindex] = ob1;
            text.value =''
            genUI(arr)
        }
        var val = "all";
        var filter;
        function checkFilter(e) {
            val = e.target.value;
            runfilter()

            genUI(filter)
        }

        function runfilter() {
            filter = arr;
            if (val !== 'all') {
                filtercall();
            }
        }

        function filtercall() {
            filter = arr.filter((a) => {
                if (val === 'completed') {
                    return a.status
                }
                if (val === 'not completed') {
                    return !a.status
                }

            })
        }
        updateHead()

    </script>
</body>

</html>