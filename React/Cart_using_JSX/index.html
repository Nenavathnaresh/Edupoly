<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Cart</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">

</head>

<body>
    <div class="">
        <div id="root1"  class="sticky-top bg-info d-flex"></div> 
        <div id="root" class="table d-flex flex-wrap border justify-content-evenly"></div>
    </div>
    <script type="text/babel">
        var productArr = [];
        var nav = <>                      
                    <img class='me-auto ms-4' style={{width:"70px",height:'70px'}} src="https://w7.pngwing.com/pngs/384/470/png-transparent-retail-computer-icons-e-commerce-sales-mega-offer-miscellaneous-service-logo.png" />
                    <a href="cart page.html"><button class=' me-5 btn '><h1 class="bi bi-cart-check m-0"></h1></button></a>
                  </>
            ReactDOM.render(nav,document.getElementById('root1'))
        
        axios.get('https://fakestoreapi.com/products').then((res) => {

            productArr = res.data.map((b) => {
                return ({ ...b, 'isIteminCart': false })
            })

            if (!window.localStorage.getItem("productArr")) {
                window.localStorage.setItem("productArr", [JSON.stringify(productArr)])
            }
            else {
                productArr = JSON.parse(window.localStorage.getItem('productArr'))
            }

            function cartPage() {
                var x = <>
                    {
                        productArr.map((product, index) => {
                            return (
                                <div class='rounded border border-3 border-black' style={{width: '30%', margin: '5px', padding: '10px', textAlign: 'center'}}>
                                    <span ><img style={{ width: '100px' }} src={product.image} /></span><br />
                                    <span>Title:{product.title}</span><br />
                                    <span>Category:{product.category}</span><br />
                                    <span>Price:{product.price}</span><br />
                                    <button class='btn btn-warning' disabled={product.isIteminCart ? true : false} onClick={() => { addtoCart() }}> <i class="bi bi-cart-plus bg-warning"></i> Add to Cart  </button>
                                </div>
                            )
                            function addtoCart() {
                                product.isIteminCart = true
                                //console.log(productArr);
                                window.localStorage.setItem("productArr", [JSON.stringify(productArr)])
                                cartPage()
                            }
                        })
                    }
                </>
                ReactDOM.render(x, document.getElementById('root'))
            }
            cartPage()
        })


    </script>
</body>

</html>