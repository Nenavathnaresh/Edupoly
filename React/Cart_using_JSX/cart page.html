<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">

</head>

<body>
    <div class="d-flex">
        <div id="root1" class="d-flex flex-wrap w-75"></div>
        <div class="w-25 border border-warning m-3 rounded"> <h1 id="h1"></h1></div>
    </div>
    <script type="text/babel">

        var arr = JSON.parse(window.localStorage.getItem('productArr'))

      var  cartarr = arr.filter((a) => {
            return a.isIteminCart
        })

        cartarr = cartarr.map((c) => {
            return { ...c, count: 1 }
        })
        console.log(cartarr);

        function createCart() {
            var y = cartarr.map((a, i) => {
                return (
                    <div class='rounded border border-warning' style={{width: '30%', margin: '5px', padding: '10px', textAlign: 'center', }}>
                        <span><img style={{ width: '100px' }} src={a.image} /></span><br />
                        <span>Title:{a.title}</span><br />
                        <span>Category:{a.category}</span><br />
                        <span>Price:{a.price}</span><br />
                        <button class='btn btn-danger ' onClick={() => (decrement(a))}><i class="bi bi-arrow-down"></i></button>
                        <input class='w-25' type="text" id="text" value={a.count} />
                        <button class='btn btn-danger me-3' onClick={() => { increment(a) }}><i class="bi bi-arrow-up"></i></button>
                        <button class='btn btn-success ms-3' onClick={() => { remove(i,a) }}>Remove</button>

                    </div>

                )


            })
            ReactDOM.render(y, document.getElementById('root1'));
            totalPrice()
        }
        createCart()

        function decrement(obj) {

            obj.count < 2 && disabled
            obj.count--
            createCart()
        }
        function increment(obj) {
            obj.count++;
            createCart()
        }
        function remove(index,prod) {
            arr.find((item)=>{
                return( item.title === prod.title);
            }).isIteminCart = false

            window.localStorage.setItem('productArr',[JSON.stringify(arr)])
            cartarr.splice(index, 1);
            createCart();
        }
        function totalPrice() {
            var h1 = document.getElementById('h1')
            var total = cartarr.reduce((a, b) => {
                console.log(a);
                return (a + (b['price'] * b['count']))
            }, 0)
            
            h1.innerHTML = `Total Price :${total}`
        }
    </script>

    </script>
</body>

</html>